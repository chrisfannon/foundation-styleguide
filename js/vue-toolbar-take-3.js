var selectList = Vue.component( 'select-list', {
  props: {
    alternatives : { type: Array },
    name: { type: String },
    myid: { type: Number }
  },
  data: function() {
    return {
      selected: ''
    }
  },
  template: `
    <div>
      <label>{{ name }}</label>
      <select @change="changedName" v-model="selected">
        <option v-for="(alt, index) in alternatives">{{ alt.name }}</option>
      </select>
    </div>
  `,
  methods: {
    changedName: function( evt ) {
      console.log( 'name changed to ', this.selected );
      this.$emit( 'option-changed', this.selected, this.myid );
    }
  },
  mounted: function() {
    this.selected = this.name;
  }
})

var tool = Vue.component( 'toolbar-tool', {
  props: {
    selectedItem: { type: String },
    icons: { type: Array },
    myIsEditor: { type: String }
  },
  template: `
    <div>
      <button v-for="icon in icons" class="button clear dark tool" :class="{ 'active' : isActive }" :name="icon.name" v-show="selectedItem == icon.name && ( myIsEditor == 'true' || icon.role == 'read' )" data-tooltip tabindex="1" :title="icon.label" data-position="bottom" data-alignment="center" :data-toggle="icon.dataToggle" @click="toolToggle">
        <span v-html="icon.svg"></span>
        <!--<span>{{ icon.label }}</span>-->
      </button>
    </div>
  `,
  data: function() {
    return {
      selected: 'false',
      isActive: false
    }
  },
  methods: {
    toolToggle: function( evt ) {
      console.log( 'isActive', this.isActive );
      this.isActive = !this.isActive;
    }
  },
  mounted: function() {
    this.selected = this.selectedItem;
  }
})

var app = new Vue({
  el: '#root',
  data : {
    isEditor : "false",
    icons: [
      {
        name: 'infoclick1',
        label: 'Infoclick',
        role: 'read',
        svg: '<svg viewBox="0 0 25 23" version="1.1" xml:space="preserve"><path id="mouse-pointer" d="M12.297,19.563l-1.454,-3.533l-1.623,1.831c-0.247,0.277 -0.6,0.435 -0.97,0.435c-0.714,0 -1.3,-0.587 -1.3,-1.3c0,-0.012 0,-0.023 0,-0.035l0,-13.003c0,-0.011 0,-0.023 0,-0.034c0,-0.713 0.586,-1.3 1.3,-1.3c0.359,0 0.702,0.149 0.948,0.411l8.49,9.1c0.234,0.248 0.364,0.577 0.364,0.918c0,0.723 -0.584,1.322 -1.307,1.34l-2.28,0l1.485,3.613c0.284,0.677 -0.036,1.467 -0.71,1.756l-1.249,0.52c-0.156,0.064 -0.323,0.097 -0.492,0.097c-0.529,0 -1.007,-0.324 -1.202,-0.816Zm-1.1,-5.6l2.131,5.179c0.025,0.076 0.096,0.127 0.176,0.127c0.022,0 0.043,-0.003 0.064,-0.011l1.249,-0.52c0.112,-0.057 0.162,-0.194 0.111,-0.309l-2.12,-5.142l3.936,0c0.113,-0.016 0.199,-0.114 0.199,-0.229c0,-0.06 -0.024,-0.119 -0.067,-0.162l-8.49,-9.1c-0.125,-0.134 -0.326,-0.032 -0.326,0.165l0,13.003c0,0.2 0.206,0.3 0.329,0.161l2.808,-3.162Z" style="fill-rule:nonzero;"/></svg>'
      },
      {
        name: 'infoclick2',
        label: 'Infoclick',
        role: 'read',
        svg: '<svg viewBox="0 0 25 25" xml:space="preserve"><path d="M12.5,2.563c-6.352,-0.001 -11.5,4.182 -11.5,9.343c0,2.228 0.961,4.268 2.561,5.872c-0.562,2.264 -2.44,4.281 -2.462,4.303c-0.099,0.103 -0.126,0.256 -0.068,0.391c0.059,0.135 0.185,0.215 0.328,0.215c2.979,0 5.211,-1.428 6.316,-2.309c1.469,0.553 3.1,0.872 4.825,0.872c6.352,0 11.5,-4.182 11.5,-9.344c0,-5.161 -5.148,-9.344 -11.5,-9.344Zm0.681,7.793l-2.118,0c-0.209,0 -0.379,0.17 -0.379,0.379l0,0.903c0,0.209 0.17,0.378 0.379,0.378l0.378,0l0,2.733l-0.378,0c-0.209,0 -0.379,0.169 -0.379,0.378l0,0.904c0,0.209 0.17,0.378 0.379,0.378l2.875,0c0.208,0 0.378,-0.169 0.378,-0.378l0,-0.904c0,-0.209 -0.17,-0.378 -0.378,-0.378l-0.379,0l0,-4.014c0,-0.209 -0.169,-0.379 -0.378,-0.379Zm-0.681,-3.631c-0.752,0 -1.362,0.609 -1.362,1.362c0,0.752 0.61,1.361 1.362,1.361c0.752,0 1.362,-0.609 1.362,-1.361c0,-0.753 -0.61,-1.362 -1.362,-1.362Z"/></svg>'
      },
      {
        name: 'drill1',
        label: 'Borra',
        role: 'read',
        svg: '<svg viewBox="0 0 25 21" version="1.1" xml:space="preserve"><path d="M7.254,10.243l-1.284,-3.176c-0.146,-0.355 -0.15,-0.754 -0.012,-1.113c0.291,-0.759 1.148,-1.153 1.915,-0.879l2.394,0.919l-0.105,-4.392c-0.024,-0.826 0.63,-1.527 1.455,-1.558l1.523,-0.044c0.19,-0.004 0.379,0.029 0.556,0.097c0.556,0.213 0.928,0.747 0.934,1.342l0.104,4.295l2.443,-1.265c0.371,-0.191 0.806,-0.215 1.195,-0.066c0.75,0.288 1.13,1.142 0.842,1.892c-0.004,0.011 -0.008,0.022 -0.013,0.033l-1.503,3.915l6.764,0c0.276,0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-7.148,0l-0.767,1.998l7.915,0c0.276,0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-8.299,0l-0.767,1.998l9.066,0c0.276,0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-9.449,0l-1.059,2.757c-0.004,0.011 -0.007,0.021 -0.011,0.032c-0.288,0.75 -1.143,1.13 -1.893,0.842c-0.376,-0.144 -0.677,-0.438 -0.83,-0.81l-1.14,-2.821l-9.58,0c-0.276,0 -0.5,-0.224 -0.5,-0.5c0,-0.276 0.224,-0.5 0.5,-0.5l9.176,0l-0.807,-1.998l-8.369,0c-0.276,0 -0.5,-0.224 -0.5,-0.5c0,-0.276 0.224,-0.5 0.5,-0.5l7.965,0l-0.807,-1.998l-7.158,0c-0.276,0 -0.5,-0.224 -0.5,-0.5c0,-0.276 0.224,-0.5 0.5,-0.5l6.754,0Zm6.277,-2.471l-0.151,-6.303c0.004,-0.09 -0.05,-0.173 -0.134,-0.205c-0.023,-0.009 -0.047,-0.014 -0.071,-0.014l-1.523,0.043c-0.141,0.015 -0.246,0.138 -0.24,0.28l0.15,6.256l-4.137,-1.588c-0.125,-0.029 -0.254,0.04 -0.3,0.16c-0.025,0.064 -0.023,0.135 0.004,0.198l5.25,12.992c0.077,0.191 0.33,0.165 0.409,-0.042l5.247,-13.669c0.081,-0.211 -0.095,-0.399 -0.281,-0.303l-4.223,2.195Z"/></svg>'
      },
      {
        name: 'drill2',
        label: 'Borra',
        role: 'read',
        svg: '<svg viewBox="0 0 25 25" xml:space="preserve"><path d="M9.543,14.041c-2.118,-3.025 -2.578,-3.79 -2.578,-5.506c0,-3.036 2.499,-5.535 5.535,-5.535c3.037,0 5.536,2.499 5.536,5.535c0,1.717 -0.461,2.481 -2.578,5.507l8.542,2.98l-11.5,5.173l-11.5,-5.173l8.543,-2.981Zm0.44,0.629l-6.991,2.439l9.508,4.277l9.508,-4.277l-6.991,-2.439c-0.548,0.782 -1.193,1.7 -1.948,2.795c-0.129,0.186 -0.342,0.298 -0.569,0.298c-0.226,0 -0.439,-0.112 -0.569,-0.298c-0.755,-1.095 -1.399,-2.013 -1.948,-2.795Zm2.517,-3.829c-1.265,0 -2.306,-1.041 -2.306,-2.306c0,-1.265 1.041,-2.306 2.306,-2.306c1.266,0 2.307,1.041 2.307,2.306c0,1.265 -1.041,2.306 -2.307,2.306Z"/></svg>'
      },
      {
        name: 'plus',
        label: 'Skapa',
        role: 'edit',
        svg: '<svg viewBox="0 0 448 448"><path d="M379.551,190.612l-121.163,0l0,-121.163c0,-14.867 -12.058,-26.925 -26.925,-26.925l-14.926,0c-14.867,0 -26.925,12.058 -26.925,26.925l0,121.163l-121.163,0c-14.867,0 -26.925,12.058 -26.925,26.925l0,13.926c0,14.867 12.058,26.925 26.925,26.925l121.163,0l0,121.163c0,14.867 12.058,26.925 26.925,26.925l14.926,0c14.867,0 26.925,-12.058 26.925,-26.925l0,-121.163l121.163,0c14.867,0 26.925,-12.058 26.925,-26.925l0,-13.926c0,-14.867 -12.058,-26.925 -26.925,-26.925Z" style="fill-rule:nonzero;"/><path d="M373.064,436.161l63.097,-63.097c4.369,-4.369 11.839,-1.275 11.839,4.904l0,63.097c0,3.83 -3.105,6.935 -6.935,6.935l-63.097,0c-6.179,0 -9.273,-7.47 -4.904,-11.839Z" style="fill-rule:nonzero;"/></svg>',
        dataToggle: 'creation-dropdown'
      },
      {
        name: 'layers',
        label: 'Lager',
        role: 'read',
        svg: '<svg viewBox="0 0 512 512" xml:space="preserve"><path d="M35.499,158.255l210.86,95.654c6.156,2.797 13.117,2.797 19.272,0l210.861,-95.654c14.981,-6.798 14.981,-29.438 0,-36.236l-210.851,-95.663c-6.117,-2.796 -13.156,-2.796 -19.272,0l-210.87,95.654c-14.981,6.798 -14.981,29.447 0,36.245Zm441.002,79.912l-52.584,-23.834l-146.319,66.325c-6.843,3.105 -14.112,4.68 -21.598,4.68c-7.486,0 -14.746,-1.575 -21.598,-4.68l-146.31,-66.325l-52.593,23.834c-14.981,6.789 -14.981,29.419 0,36.209l210.86,95.581c6.156,2.788 13.117,2.788 19.272,0l210.87,-95.581c14.981,-6.79 14.981,-29.42 0,-36.209Zm0,115.686l-52.385,-23.743l-146.518,66.415c-6.843,3.105 -14.112,4.68 -21.598,4.68c-7.486,0 -14.746,-1.575 -21.598,-4.68l-146.509,-66.415l-52.394,23.743c-14.981,6.789 -14.981,29.42 0,36.209l210.86,95.582c6.156,2.788 13.117,2.788 19.272,0l210.87,-95.582c14.981,-6.789 14.981,-29.42 0,-36.209Z" style="fill-rule:nonzero;"/></svg>',
        dataToggle: 'offCanvasLayers'
      },
      {
        name: 'merge',
        label: 'Merge',
        role: 'edit',
        svg: '<svg viewBox="0 0 21 21" xml:space="preserve"><g id="Union_8"><path d="M20,20.5l-13,0c-0.275,0 -0.5,-0.224 -0.5,-0.5l0,-7l0,-0.5l-0.5,0l-5,0c-0.275,0 -0.5,-0.224 -0.5,-0.5l0,-11c0,-0.276 0.225,-0.5 0.5,-0.5l12,0c0.275,0 0.5,0.224 0.5,0.5l0,7.5l6.5,0c0.275,0 0.5,0.224 0.5,0.5l0,11c0,0.276 -0.225,0.5 -0.5,0.5Z" style="fill-opacity:0.4;fill-rule:nonzero;"/><path d="M20,20l0,-11l-6,0l-1,0l0,-1l0,-7l-12,0l0,11l6,0l0,8l13,0m0,1l-13,0c-0.552,0 -1,-0.448 -1,-1l0,-7l-5,0c-0.552,0 -1,-0.448 -1,-1l0,-11c0,-0.552 0.448,-1 1,-1l12,0c0.552,0 1,0.448 1,1l0,7l6,0c0.552,0 1,0.448 1,1l0,11c0,0.552 -0.448,1 -1,1Z" style="fill-rule:nonzero;"/></g></svg>'
      },
      {
        name: 'trim',
        label: 'Trimma',
        role: 'edit',
        svg: '<svg viewBox="0 0 21 22" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;"><g id="Group_1314"><g id="Subtraction_12"><path d="M6.501,12.501l-5.501,0c-0.275,0 -0.5,-0.224 -0.5,-0.5l0,-11.001c0,-0.276 0.225,-0.5 0.5,-0.5l11.999,0c0.275,0 0.5,0.224 0.5,0.5l0,7.501l-5.498,0c-0.827,0 -1.5,0.673 -1.5,1.5l0,2.5Z" style="fill-opacity:0.4;fill-rule:nonzero;"/><path d="M6.001,12.001l0,-2c0,-1.103 0.897,-2 2,-2l4.998,0l0,-7.001l-11.999,0l0,11.001l5.001,0m1,1l-0.001,0l-6,0c-0.552,0 -1,-0.448 -1,-1l0,-11.001c0,-0.551 0.448,-1 1,-1l11.999,0c0.552,0 1,0.449 1,1l0,8.001l-5.998,0c-0.552,0 -1,0.449 -1,1l0,3Z" style="fill-rule:nonzero;"/></g><g id="Rectangle_1741"><path d="M21,9.001c0,-0.552 -0.448,-1 -1,-1l-13,0c-0.552,0 -1,0.448 -1,1l0,11c0,0.552 0.448,1 1,1l13,0c0.552,0 1,-0.448 1,-1l0,-11Z" style="fill:none;"/><path d="M20.5,9.001c0,-0.276 -0.224,-0.5 -0.5,-0.5l-13,0c-0.276,0 -0.5,0.224 -0.5,0.5l0,11c0,0.276 0.224,0.5 0.5,0.5l13,0c0.276,0 0.5,-0.224 0.5,-0.5l0,-11Z" style="fill:none;stroke:currentColor;stroke-width:1px;"/></g></g></svg>'
      },
      {
        name: 'slice',
        label: 'Dela',
        role: 'edit',
        svg: '<svg viewBox="0 0 23 23" xml:space="preserve"><path id="scalpel-path" d="M12.333,19.27l-2.775,0c0,0 -0.001,0 -0.001,0c-0.152,0 -0.277,0.125 -0.277,0.277l0,0.556c0,0 0,0.001 0,0.001c0,0.152 0.125,0.277 0.277,0.277c0,0 0.001,0 0.001,0l2.775,0c0,0 0.001,0 0.001,0c0.152,0 0.277,-0.125 0.277,-0.277c0,0 0,-0.001 0,-0.001l0,-0.555c0,0 0,-0.001 0,-0.001c0,-0.152 -0.125,-0.277 -0.277,-0.277c0,0 -0.001,0 -0.001,0Zm5,0l-2.78,0c0,0 -0.001,0 -0.001,0c-0.152,0 -0.277,0.125 -0.277,0.277l0,0.556c0,0 0,0.001 0,0.001c0,0.152 0.125,0.277 0.277,0.277c0,0 0.001,0 0.001,0l2.775,0c0,0 0.001,0 0.001,0c0.152,0 0.277,-0.125 0.277,-0.277c0,0 0,-0.001 0,-0.001l0,-0.555c0,0 0,-0.001 0,-0.001c0,-0.152 -0.125,-0.277 -0.277,-0.277c0,0 -0.001,0 -0.001,0l0.005,0Zm5,0l-2.785,0c0,0 -0.001,0 -0.001,0c-0.152,0 -0.277,0.125 -0.277,0.277l0,0.556c0,0 0,0.001 0,0.001c0,0.152 0.125,0.277 0.277,0.277c0,0 0.001,0 0.001,0l2.775,0c0,0 0.001,0 0.001,0c0.152,0 0.277,-0.125 0.277,-0.277c0,0 0,-0.001 0,-0.001l0,-0.555c0,0 0,-0.001 0,-0.001c0,-0.152 -0.125,-0.277 -0.277,-0.277c0,0 -0.001,0 -0.001,0l0.01,0Zm-4.192,-16.193c-0.423,-0.3 -0.929,-0.46 -1.448,-0.457c-0.829,0.006 -1.615,0.371 -2.155,1l-7.767,9.08c-0.179,0.214 -0.186,0.526 -0.017,0.748l-6.354,6.932l0.013,0c3.438,0.019 6.78,-1.14 9.468,-3.284l0.024,-0.019c1.008,-0.848 1.657,-2.049 1.812,-3.357l0.609,0c0.361,0 0.704,-0.159 0.939,-0.433l5.358,-6.261c0.417,-0.489 0.647,-1.111 0.647,-1.753c0,-0.871 -0.421,-1.691 -1.13,-2.197l0.001,0.001Zm-8.959,13.157c-1.747,1.405 -3.814,2.357 -6.017,2.773l4.846,-5.287l2.609,0c-0.159,0.984 -0.67,1.878 -1.438,2.514Zm8.6,-9.929l-5.36,6.261c-0.025,0.029 -0.062,0.045 -0.1,0.044l-4.012,0l7.071,-8.264c0.328,-0.385 0.806,-0.61 1.312,-0.617c0.286,-0.002 0.566,0.085 0.8,0.25c0.364,0.257 0.601,0.657 0.652,1.1c0.055,0.443 -0.079,0.888 -0.368,1.228l0.005,-0.002Z" style="fill-rule:nonzero;"/></svg>'
      }
    ],
    selectControls: [
      {
        name: "infoclick1"
      },
      {
        name: "drill1"
      },
      {
        name: "merge"
      },
      {
        name: "trim"
      },
      {
        name: "slice"
      },
      {
        name: 'plus'
      },
      {
        name: 'layers'
      }
    ],
    dropdown : {
      isActive : false
    },
    dropdowns : [
      {
        id: 0,
        isActive : false  
      },
      {
        id: 1,
        isActive: false
      }
      
    ],
    isMenuToggled: false
  },
  methods: {
    selectNewControl: function( selected, id ) {
      console.log( "Detected a custom event ", selected, id );
      this.selectControls[ id ].name = selected;
    },
    dropdownTriggered: function( evt, id ) {
      console.log( "Dropdown triggered", id );
      this.dropdown.isActive = ( this.dropdown.isActive ) ? false : true;
    },
    toggleMenu: function( evt, id ) {
      this.isMenuToggled = !this.isMenuToggled;
    }
  }
})